---
import Layout from "../../layouts/Layout.astro";
import { Fetcher } from "../../utils/fetchUtils.js";

export const prerender = true;

export async function getStaticPaths() {
    return [
        { params: { legales: "mentions-legales" }, props: { id: 30540 } },
        { params: { legales: "politique-de-confidentialite" }, props: { id: 30544 } },
        { params: { legales: "conditions-generales-de-vente" }, props: { id: 30542 } },
    ];
}

const { legales } = Astro.params;
const { id } = Astro.props;
const fetcher = new Fetcher();
const data = await fetcher.fetchData(`/wp-json/wp/v2/pages/${id}`);
---

<Layout title="Informations légales">
    {data && data.content && data.content.rendered ? (
        <main class="LegalContent">
            <h1 class="LegalContent__title">
                {data.title?.rendered || "Informations légales"}
            </h1>
            <div
                class="LegalContent__body"
                set:html={data.content.rendered}
            />
        </main>
    ) : (
        <main class="EmptyState">
            <div class="EmptyState__container">
                <div class="EmptyState__icon">
                    <svg
                        width="64"
                        height="64"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="1.5"
                    >
                        <rect
                            x="3"
                            y="3"
                            width="18"
                            height="18"
                            rx="2"
                            ry="2"
                        ></rect>
                        <line x1="3" y1="9" x2="21" y2="9"></line>
                        <line x1="9" y1="21" x2="9" y2="9"></line>
                    </svg>
                </div>
                <h2 class="EmptyState__message">
                    Aucune information légale disponible pour le moment.
                </h2>
            </div>
        </main>
    )}
</Layout>

<style>
    .LegalContent {
        max-width: 900px;
        margin: 0 auto;
        padding: 3rem 2rem;
    }

    .LegalContent__title {
        font-size: 2.5rem;
        margin-bottom: 2.5rem;
        text-align: center;
        font-weight: 600;
    }

    .LegalContent__body {
        line-height: 1.8;
        font-size: 1rem;
    }

    .LegalContent__body :global(h2) {
        font-size: 1.75rem;
        font-weight: 600;
        margin-top: 3rem;
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid currentColor;
        opacity: 0.8;
    }

    .LegalContent__body :global(h3) {
        font-size: 1.35rem;
        font-weight: 600;
        margin-top: 2rem;
        margin-bottom: 1rem;
    }

    .LegalContent__body :global(p) {
        margin-bottom: 1.25rem;
        line-height: 1.8;
    }

    .LegalContent__body :global(p:first-of-type) {
        font-size: 0.95rem;
        font-style: italic;
        opacity: 0.8;
    }

    .LegalContent__body :global(strong) {
        font-weight: 600;
    }

    .LegalContent__body :global(br) {
        display: block;
        content: "";
        margin-bottom: 0.5rem;
    }

    .LegalContent__body :global(ul),
    .LegalContent__body :global(ol) {
        margin-left: 2rem;
        margin-bottom: 1.5rem;
    }

    .LegalContent__body :global(li) {
        margin-bottom: 0.75rem;
        line-height: 1.7;
    }

    .LegalContent__body :global(hr) {
        margin: 3rem 0;
        border: none;
        border-top: 1px solid currentColor;
        opacity: 0.2;
    }

    .LegalContent__body :global(a) {
        text-decoration: none;
        border-bottom: 1px solid transparent;
        transition: border-color 0.2s;
    }

    .LegalContent__body :global(a:hover) {
        border-bottom-color: currentColor;
    }

    @media (max-width: 768px) {
        .LegalContent {
            padding: 2rem 1rem;
        }

        .LegalContent__title {
            font-size: 2rem;
            margin-bottom: 2rem;
        }

        .LegalContent__body :global(h2) {
            font-size: 1.5rem;
            margin-top: 2rem;
        }

        .LegalContent__body {
            font-size: 0.95rem;
        }
    }
</style>


