---
import Masonry from "../components/reactive/Masonry.vue";
import Layout from "../layouts/Layout.astro";
import { Fetcher } from "../utils/fetchUtils.js";

const fetcher = new Fetcher();
const data = await fetcher.fetchData('/wp-json/wp/v2/travail?per_page=100');

// Transform data for the Vue component
const images = data && data.length > 0 ? data
    .filter((item: any) => item.acf?.oeuvre?.url)
    .map((item: any) => ({
        url: item.acf.oeuvre.url,
        alt: item.title?.rendered || "Å’uvre d'art",
        title: item.title?.rendered || "Sans titre",
        description: item.acf.description || ""
    })) : [];
---

<Layout>
        {
        images.length > 0 ? (
            <Masonry images={images} client:load />
        ) : null
    }
</Layout>
